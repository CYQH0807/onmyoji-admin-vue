import{l as oe,v as p}from"./@vue.runtime-dom-DkKQpP1Z.js";import{i as te,s as J,m as se}from"./index-BzwtatPw.js";import{u as ae}from"./index-OBXFyj3D.js";import{W as le,l as F,a as ie,o as ne}from"./@element-plus.icons-vue-BCFYf-67.js";import{a as de}from"./@vueuse.core-Bp0bPelK.js";import{u as re,a as ce}from"./menu-CUE9Wx3g.js";import{d as C,o as y,c as L,a as o,aa as me,q as ue,e as pe,Y as c,J as M,K as d,i as t,O as _,L as f,F as _e,N as B,av as fe,au as ve}from"./@vue.runtime-core-B2X3lOUZ.js";import{O as x}from"./@vue.shared-D-bMerGS.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as he,y as ye}from"./lodash-es-I-EvhVFk.js";import{a as h,b as K}from"./element-plus-DaJS5H-O.js";import{k as V,u as r}from"./@vue.reactivity-V6IlnEmz.js";import"./store-BGvsPsWR.js";import"./chardet-C_72lc3Z.js";import"./mitt-C1z4c41a.js";import"./axios-CvWkLj0m.js";import"./nprogress-B7fG2QpQ.js";import"./pinia-ByvooDwk.js";import"./vue-demi-Dq6ymT-8.js";import"./monaco-editor-CuOEaJz6.js";import"./vue-echarts-BbwyaQnR.js";import"./resize-detector-CZu9PX2v.js";import"./echarts-Bv2MlBtc.js";import"./tslib-BDyQ-Jie.js";import"./zrender-BSc91FC-.js";import"./vue-router-4IlAtr41.js";import"./mockjs-Bfc9hT_P.js";import"./dayjs-DOBku9Nj.js";import"./vue-xN6KRtQP.js";import"./@popperjs.core-D9SI2xQl.js";import"./@ctrl.tinycolor-r5W6hzzQ.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui.dom-B8Qxuwjg.js";import"./@floating-ui.core-DTrSsA1T.js";import"./@floating-ui.utils-Bh-IyuRp.js";import"./@vueuse.shared-CZpoHp70.js";import"./socket.io-client-CFD4C2bo.js";import"./engine.io-client-BMFYY_Ci.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io.component-emitter-Dkula2eQ.js";import"./socket.io-parser-DjBqVKS_.js";const ge={class:"text-stage"},be={class:"wrapper"},Ve=me('<div class="slash" data-v-892f950c></div><div class="sides" data-v-892f950c><div class="side" data-v-892f950c></div><div class="side" data-v-892f950c></div><div class="side" data-v-892f950c></div><div class="side" data-v-892f950c></div></div>',2),xe={class:"text"},Ce={class:"text--backing"},ke={class:"text--left"},we={class:"inner"},$e={class:"text--right"},ze={class:"inner"},Se=C({name:"undefined"}),Te=C({...Se,props:{fontSize:{type:String,default:"30px"},color:{type:String,default:"#000000"},modelValue:String},setup(m){return oe(k=>({"9cbabc2c":m.fontSize})),(k,w)=>(y(),L("div",ge,[o("div",be,[Ve,o("div",xe,[o("div",Ce,x(m.modelValue),1),o("div",ke,[o("div",we,x(m.modelValue),1)]),o("div",$e,[o("div",ze,x(m.modelValue),1)])])])]))}}),Ee=W(Te,[["__scopeId","data-v-892f950c"]]),v=m=>(fe("data-v-86fc5062"),m=m(),ve(),m),Ie={class:"ai-code"},Ne={class:"container"},Ue={class:"head"},Fe={class:"form"},Me=v(()=>o("div",{class:"label required"},"CRUD",-1)),Be=v(()=>o("div",{class:"label"},"其他你想做的事？",-1)),De={class:"btns"},qe=v(()=>o("div",{class:"tips"},"如遇见 “代码缺失”、“请求超时”，请尝试「刷新」吧",-1)),Ae={class:"codes"},Re={class:"item is-entity"},Oe={class:"label"},Je={class:"name"},Ke=v(()=>o("span",null,"Entity（实体类）",-1)),Le={class:"item is-controller"},We={class:"label"},Ye={class:"name"},je=v(()=>o("span",null,"Controller（控制层）",-1)),Ge={class:"item is-vue"},He={class:"label"},Pe={class:"name"},Qe=v(()=>o("span",null,"Vue（页面）",-1)),Xe={class:"op"},Ze=v(()=>o("div",{class:"bottom"},null,-1)),eo=C({name:"helper-ai-code"}),oo=C({...eo,setup(m){const{service:k,refs:w,setRefs:g}=ae(),{copy:Y}=de(),j=ce(),$=re(),G=te.useForm(),z={timer:null,scrollTo({el:l,top:e}){const b=w.scrollbar.wrapRef;l&&(e=b.querySelector(l).offsetTop),b.scrollTo({top:e,behavior:"smooth"})},start(){this.stop(),this.timer=setInterval(()=>{a.entity&&this.scrollTo({top:Math.random()+1e4})},100)},stop(){this.timer&&clearInterval(this.timer)}},S=V({options:{fontSize:15}}),i=V(J.get("ai-create.form")||{name:"收货地址",module:"user",other:"",columns:"用户ID、联系人、手机号、省市区、地址、是否默认"}),s=V({disabled:!1,coding:"",data:{router:"",prefix:"",path:"",module:"",fileName:"",className:"",other:"",columns:[],api:[]},api:[{path:"/add",summary:"新增"},{path:"/info",summary:"单个信息"},{path:"/update",summary:"修改"},{path:"/delete",summary:"删除"},{path:"/page",summary:"分页查询"},{path:"/list",summary:"列表查询"}]}),a=V({entity:"",controller:"",vue:""});function D(l="entity",e){s.disabled=!0,s.coding=l,$.send({...e,type:l,isAll:!1}),z.start()}function q(){s.disabled=!1,s.coding="",z.stop()}function A(){q(),a.entity="",a.controller="",a.vue=""}function H(){if(!i.module)return h.warning("请选择模块");if(!i.name)return h.warning("请填写实体名称");if(ye(i.columns))return h.warning("请填写字段");function l(){A(),D("entity",{...i,columns:i.columns.split("、")})}a.entity?K.confirm("此操作将重新生成代码，是否继续？","提示",{type:"warning"}).then(()=>{l()}).catch(()=>null):l()}function T(l){Y(a[l]),h.success("复制成功")}function P(){return h.error("只有在开发环境下才有效")}const R=he(l=>{async function e(){a.entity&&(await $.matchType({columns:s.data.columns,name:i.name}),a.vue=j.createVue(s.data),q(),setTimeout(()=>{z.scrollTo({el:".codes .is-vue"}),w.codeVue.formatCode()},300))}l?e():K.confirm("此操作将会重新生成vue代码，是否继续？","提示",{type:"warning"}).then(async()=>{s.coding="vue",a.vue="",await O(),e()}).catch(()=>null)},300);async function O(){await k.base.sys.menu.parse({entity:a.entity,module:i.module}).then(l=>{s.data={...i,...l,router:l.path.replace("/admin",""),prefix:l.path,api:s.api}})}return ue(()=>i,l=>{J.set("ai-create.form",l)}),pe(()=>{$.connect({onMessage(l){a[s.coding]=l},async onComplete(){switch(s.coding){case"entity":await O(),D("controller",s.data);break;case"controller":R(!0);break}}})}),(l,e)=>{const b=c("cl-select"),E=c("el-col"),I=c("el-input"),Q=c("el-row"),X=c("el-form"),u=c("el-button"),N=c("el-icon"),U=c("cl-editor"),Z=c("cl-form"),ee=c("el-scrollbar");return y(),M(ee,{ref:r(g)("scrollbar")},{default:d(()=>[o("div",Ie,[o("div",Ne,[o("div",Ue,[t(Ee,{"model-value":"Cool Ai 极速编码"})]),o("div",Fe,[t(X,{disabled:s.disabled,size:"large"},{default:d(()=>[Me,t(Q,{gutter:10},{default:d(()=>[t(E,{lg:6,xs:24,sm:12},{default:d(()=>[t(b,{class:"module",placeholder:"请选择模块",modelValue:i.module,"onUpdate:modelValue":e[0]||(e[0]=n=>i.module=n),options:r(se).dirs,"label-key":"name","value-key":"name","allow-create":""},null,8,["modelValue","options"])]),_:1}),t(E,{lg:6,xs:24,sm:12},{default:d(()=>[t(I,{class:"name",modelValue:i.name,"onUpdate:modelValue":e[1]||(e[1]=n=>i.name=n),placeholder:"实体名称，如：收货地址"},null,8,["modelValue"])]),_:1}),t(E,{lg:12,xs:24,sm:24},{default:d(()=>[t(I,{class:"columns",modelValue:i.columns,"onUpdate:modelValue":e[2]||(e[2]=n=>i.columns=n),placeholder:"请填写字段，如：姓名、年龄、状态"},null,8,["modelValue"])]),_:1})]),_:1}),Be,t(I,{type:"textarea",modelValue:i.other,"onUpdate:modelValue":e[3]||(e[3]=n=>i.other=n),rows:5,placeholder:"如：分页查询时姓名、手机号字段设置成可模糊搜索"},null,8,["modelValue"])]),_:1},8,["disabled"])]),o("div",De,[t(u,{round:"",size:"large",type:"primary",icon:r(le),disabled:s.disabled,loading:s.disabled,onClick:H},{default:d(()=>[_(x(s.disabled?"思考中":a.entity.length?"重新生成":"下一步"),1)]),_:1},8,["icon","disabled","loading"])]),qe,o("div",Ae,[f(o("div",Re,[o("div",Oe,[o("div",Je,[Ke,f(t(N,{class:"is-loading"},{default:d(()=>[t(r(F))]),_:1},512),[[p,s.coding=="entity"]])]),s.disabled?B("",!0):(y(),L(_e,{key:0},[t(u,{round:"",size:"small",onClick:e[4]||(e[4]=n=>T("entity"))},{default:d(()=>[_("Copy")]),_:1}),t(u,{round:"",type:"success",size:"small",loading:!a.vue,onClick:e[5]||(e[5]=n=>r(R)())},{default:d(()=>[_(" 生成Vue代码 ")]),_:1},8,["loading"])],64))]),t(U,{name:"cl-editor-monaco",ref:r(g)("codeEntity"),options:S.options,height:"auto",autofocus:"",autosize:"",language:"typescript",modelValue:a.entity,"onUpdate:modelValue":e[6]||(e[6]=n=>a.entity=n)},null,8,["options","modelValue"])],512),[[p,a.entity]]),f(o("div",Le,[o("div",We,[o("div",Ye,[je,f(t(N,{class:"is-loading"},{default:d(()=>[t(r(F))]),_:1},512),[[p,s.coding=="controller"]])]),s.disabled?B("",!0):(y(),M(u,{key:0,round:"",size:"small",onClick:e[7]||(e[7]=n=>T("controller"))},{default:d(()=>[_("Copy")]),_:1}))]),t(U,{name:"cl-editor-monaco",ref:r(g)("codeController"),options:S.options,height:"auto",autosize:"",language:"typescript",modelValue:a.controller,"onUpdate:modelValue":e[8]||(e[8]=n=>a.controller=n)},null,8,["options","modelValue"])],512),[[p,a.controller]]),f(o("div",Ge,[o("div",He,[o("div",Pe,[Qe,f(t(N,{class:"is-loading"},{default:d(()=>[t(r(F))]),_:1},512),[[p,s.coding=="vue"]])]),s.disabled?B("",!0):(y(),M(u,{key:0,round:"",size:"small",onClick:e[9]||(e[9]=n=>T("vue"))},{default:d(()=>[_("Copy")]),_:1}))]),t(U,{name:"cl-editor-monaco",ref:r(g)("codeVue"),options:S.options,height:"auto",autosize:"",language:"html",modelValue:a.vue,"onUpdate:modelValue":e[10]||(e[10]=n=>a.vue=n)},null,8,["options","modelValue"])],512),[[p,a.vue]])]),f(o("div",Xe,[t(u,{icon:r(ie),round:"",size:"large",onClick:A},{default:d(()=>[_(" 取消 ")]),_:1},8,["icon"]),t(u,{icon:r(ne),round:"",size:"large",type:"success",onClick:P},{default:d(()=>[_(" 创建文件 ")]),_:1},8,["icon"])],512),[[p,!s.disabled&&a.entity.length]]),Ze]),t(Z,{ref_key:"Form",ref:G},null,512)])]),_:1},512)}}}),Yo=W(oo,[["__scopeId","data-v-86fc5062"]]);export{Yo as default};
