import{D as B}from"./vuedraggable-CVtBI3ut.js";import{s as b}from"./index-BzwtatPw.js";import{E as D,F as I,r as A}from"./lodash-es-I-EvhVFk.js";import{d as S,t as $,q as w,n as U,Y as _,o as x,c as F,i as a,K as l,O as d,a as V,av as q,au as O}from"./@vue.runtime-core-B2X3lOUZ.js";import{r as E}from"./@vue.reactivity-V6IlnEmz.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{O as K}from"./@vue.shared-D-bMerGS.js";import"./sortablejs-GwZ5MQS7.js";import"./chardet-C_72lc3Z.js";import"./@vue.runtime-dom-DkKQpP1Z.js";import"./vue-xN6KRtQP.js";import"./element-plus-DaJS5H-O.js";import"./@element-plus.icons-vue-BCFYf-67.js";import"./@popperjs.core-D9SI2xQl.js";import"./@ctrl.tinycolor-r5W6hzzQ.js";import"./dayjs-DOBku9Nj.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui.dom-B8Qxuwjg.js";import"./@floating-ui.core-DTrSsA1T.js";import"./@floating-ui.utils-Bh-IyuRp.js";import"./@vueuse.core-Bp0bPelK.js";import"./@vueuse.shared-CZpoHp70.js";import"./store-BGvsPsWR.js";import"./mitt-C1z4c41a.js";import"./axios-CvWkLj0m.js";import"./nprogress-B7fG2QpQ.js";import"./pinia-ByvooDwk.js";import"./vue-demi-Dq6ymT-8.js";import"./monaco-editor-CuOEaJz6.js";import"./vue-echarts-BbwyaQnR.js";import"./resize-detector-CZu9PX2v.js";import"./echarts-Bv2MlBtc.js";import"./tslib-BDyQ-Jie.js";import"./zrender-BSc91FC-.js";import"./vue-router-4IlAtr41.js";import"./mockjs-Bfc9hT_P.js";const Y=S({name:"cl-column-custom",components:{Draggable:B},props:{name:String,columns:{type:Array,required:!0,default:()=>[]}},setup(e){const n=E(!1),f=`column-custom__${e.name||location.pathname}`,p=E([]),m=$(()=>e.columns.filter(o=>!o.type&&o.prop));function v(){U(()=>{m.value.forEach(o=>{var t;o.hidden=!((t=p.value.find(i=>i.prop==o.prop))!=null&&t.checked),o.orderNum=p.value.findIndex(i=>i.prop==o.prop)})})}function s(){b.set(f,p.value),v(),u()}function h(){m.value.forEach(o=>{o.orderNum!==void 0&&(o.hidden=!1,o.orderNum=0)}),b.remove(f),c(),u()}function k(){n.value=!0,c()}function u(){n.value=!1}function r(o){return A(o,"orderNum","asc")}function c(){if(!e.columns)return!1;const o=b.get(f);p.value=r(m.value.map(t=>{var y;let i=!0,C=t.orderNum||0;return D(t.hidden)&&(i=!t.hidden),o&&(i=(y=o.find(g=>g.prop==t.prop))==null?void 0:y.checked,C=o.findIndex(g=>g.prop==t.prop)),{label:t.label,prop:t.prop,checked:i,orderNum:C}})),v()}function N(o){return r(m.value.filter(t=>!t.hidden)).map(t=>I(o,t.prop)?o[t.prop]:"")}return w(()=>e.columns,()=>{c()}),{visible:n,list:p,open:k,close:u,save:s,reset:h,summary:N}}}),j=e=>(q("data-v-4396361e"),e=e(),O(),e),z={class:"cl-column-custom__wrap"},G={class:"cl-column-custom__dialog"},H={class:"left"},J=j(()=>V("div",{class:"right"},null,-1));function L(e,n,f,p,m,v){const s=_("el-button"),h=_("el-checkbox"),k=_("draggable"),u=_("cl-dialog");return x(),F("div",z,[a(s,{onClick:e.open},{default:l(()=>[d("自定义列")]),_:1},8,["onClick"]),a(u,{modelValue:e.visible,"onUpdate:modelValue":n[1]||(n[1]=r=>e.visible=r),title:"自定义列"},{footer:l(()=>[a(s,{onClick:e.close},{default:l(()=>[d("取消")]),_:1},8,["onClick"]),a(s,{type:"danger",onClick:e.reset},{default:l(()=>[d("重置")]),_:1},8,["onClick"]),a(s,{type:"success",onClick:e.save},{default:l(()=>[d("保存")]),_:1},8,["onClick"])]),default:l(()=>[V("div",G,[V("div",H,[a(k,{"item-key":"prop",modelValue:e.list,"onUpdate:modelValue":n[0]||(n[0]=r=>e.list=r)},{item:l(({element:r})=>[a(h,{border:"",modelValue:r.checked,"onUpdate:modelValue":c=>r.checked=c},{default:l(()=>[d(K(r.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),J])]),_:1},8,["modelValue"])])}const wo=T(Y,[["render",L],["__scopeId","data-v-4396361e"]]);export{wo as default};
