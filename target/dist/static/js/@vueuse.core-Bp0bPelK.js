import{n as I,i as $,t as T,a as R,u as G,b as q,c as U,d as F,e as X,w as Y}from"./@vueuse.shared-CZpoHp70.js";import{q as P,t as k,g as Z,e as ee,v as te,n as ne}from"./@vue.runtime-core-B2X3lOUZ.js";import{r as L,n as re}from"./@vue.reactivity-V6IlnEmz.js";function H(e){var a;const n=T(e);return(a=n==null?void 0:n.$el)!=null?a:n}const O=q?window:void 0,B=q?window.navigator:void 0;function V(...e){let a,n,i,t;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,t]=e,a=O):[a,n,i,t]=e,!a)return I;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const s=[],c=()=>{s.forEach(p=>p()),s.length=0},u=(p,d,b,h)=>(p.addEventListener(d,b,h),()=>p.removeEventListener(d,b,h)),f=P(()=>[H(a),T(t)],([p,d])=>{if(c(),!p)return;const b=$(d)?{...d}:d;s.push(...n.flatMap(h=>i.map(w=>u(p,h,w,b))))},{immediate:!0,flush:"post"}),l=()=>{f(),c()};return R(l),l}function ae(){const e=L(!1),a=Z();return a&&ee(()=>{e.value=!0},a),e}function W(e){const a=ae();return k(()=>(a.value,!!e()))}function oe(e,a={}){const{window:n=O}=a,i=W(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let t;const s=L(!1),c=l=>{s.value=l.matches},u=()=>{t&&("removeEventListener"in t?t.removeEventListener("change",c):t.removeListener(c))},f=te(()=>{i.value&&(u(),t=n.matchMedia(T(e)),"addEventListener"in t?t.addEventListener("change",c):t.addListener(c),s.value=t.matches)});return R(()=>{f(),u(),t=void 0}),s}function z(e,a={}){const{controls:n=!1,navigator:i=B}=a,t=W(()=>i&&"permissions"in i);let s;const c=typeof e=="string"?{name:e}:e,u=L(),f=()=>{s&&(u.value=s.state)},l=X(async()=>{if(t.value){if(!s)try{s=await i.permissions.query(c),V(s,"change",f),f()}catch{u.value="prompt"}return s}});return l(),n?{state:u,isSupported:t,query:l}:u}function ge(e={}){const{navigator:a=B,read:n=!1,source:i,copiedDuring:t=1500,legacy:s=!1}=e,c=W(()=>a&&"clipboard"in a),u=z("clipboard-read"),f=z("clipboard-write"),l=k(()=>c.value||s),p=L(""),d=L(!1),b=G(()=>d.value=!1,t);function h(){c.value&&E(u.value)?a.clipboard.readText().then(o=>{p.value=o}):p.value=S()}l.value&&n&&V(["copy","cut"],h);async function w(o=T(i)){l.value&&o!=null&&(c.value&&E(f.value)?await a.clipboard.writeText(o):v(o),p.value=o,d.value=!0,b.start())}function v(o){const y=document.createElement("textarea");y.value=o??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function S(){var o,y,m;return(m=(y=(o=document==null?void 0:document.getSelection)==null?void 0:o.call(document))==null?void 0:y.toString())!=null?m:""}function E(o){return o==="granted"||o==="prompt"}return{isSupported:l,text:p,copied:d,copy:w}}const x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j="__vueuse_ssr_handlers__",ie=se();function se(){return j in x||(x[j]=x[j]||{}),x[j]}function K(e,a){return ie[e]||a}function ue(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const le={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},J="vueuse-storage";function ce(e,a,n,i={}){var t;const{flush:s="pre",deep:c=!0,listenToStorageChanges:u=!0,writeDefaults:f=!0,mergeDefaults:l=!1,shallow:p,window:d=O,eventFilter:b,onError:h=r=>{},initOnMounted:w}=i,v=(p?re:L)(typeof a=="function"?a():a);if(!n)try{n=K("getDefaultStorage",()=>{var r;return(r=O)==null?void 0:r.localStorage})()}catch(r){h(r)}if(!n)return v;const S=T(a),E=ue(S),o=(t=i.serializer)!=null?t:le[E],{pause:y,resume:m}=Y(v,()=>D(v.value),{flush:s,deep:c,eventFilter:b});d&&u&&F(()=>{V(d,"storage",C),V(d,J,N),w&&C()}),w||C();function A(r,g){d&&d.dispatchEvent(new CustomEvent(J,{detail:{key:e,oldValue:r,newValue:g,storageArea:n}}))}function D(r){try{const g=n.getItem(e);if(r==null)A(g,null),n.removeItem(e);else{const M=o.write(r);g!==M&&(n.setItem(e,M),A(g,M))}}catch(g){h(g)}}function _(r){const g=r?r.newValue:n.getItem(e);if(g==null)return f&&S!=null&&n.setItem(e,o.write(S)),S;if(!r&&l){const M=o.read(g);return typeof l=="function"?l(M,S):E==="object"&&!Array.isArray(M)?{...S,...M}:M}else return typeof g!="string"?g:o.read(g)}function C(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){v.value=S;return}if(!(r&&r.key!==e)){y();try{(r==null?void 0:r.newValue)!==o.write(v.value)&&(v.value=_(r))}catch(g){h(g)}finally{r?ne(m):m()}}}}function N(r){C(r.detail)}return v}function Q(e){return oe("(prefers-color-scheme: dark)",e)}function de(e={}){const{selector:a="html",attribute:n="class",initialValue:i="auto",window:t=O,storage:s,storageKey:c="vueuse-color-scheme",listenToStorageChanges:u=!0,storageRef:f,emitAuto:l,disableTransition:p=!0}=e,d={auto:"",light:"light",dark:"dark",...e.modes||{}},b=Q({window:t}),h=k(()=>b.value?"dark":"light"),w=f||(c==null?U(i):ce(c,i,s,{window:t,listenToStorageChanges:u})),v=k(()=>w.value==="auto"?h.value:w.value),S=K("updateHTMLAttrs",(m,A,D)=>{const _=typeof m=="string"?t==null?void 0:t.document.querySelector(m):H(m);if(!_)return;let C;if(p&&(C=t.document.createElement("style"),C.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),t.document.head.appendChild(C)),A==="class"){const N=D.split(/\s/g);Object.values(d).flatMap(r=>(r||"").split(/\s/g)).filter(Boolean).forEach(r=>{N.includes(r)?_.classList.add(r):_.classList.remove(r)})}else _.setAttribute(A,D);p&&(t.getComputedStyle(C).opacity,document.head.removeChild(C))});function E(m){var A;S(a,n,(A=d[m])!=null?A:m)}function o(m){e.onChanged?e.onChanged(m,E):E(m)}P(v,o,{flush:"post",immediate:!0}),F(()=>o(v.value));const y=k({get(){return l?w.value:v.value},set(m){w.value=m}});try{return Object.assign(y,{store:w,system:h,state:v})}catch{return y}}function ve(e={}){const{valueDark:a="dark",valueLight:n="",window:i=O}=e,t=de({...e,onChanged:(u,f)=>{var l;e.onChanged?(l=e.onChanged)==null||l.call(e,u==="dark",f,u):f(u)},modes:{dark:a,light:n}}),s=k(()=>t.system?t.system.value:Q({window:i}).value?"dark":"light");return k({get(){return t.value==="dark"},set(u){const f=u?"dark":"light";s.value===f?t.value="auto":t.value=f}})}export{ge as a,ve as b,V as u};
